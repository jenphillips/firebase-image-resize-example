{"ast":null,"code":"import _classCallCheck from \"/Users/jenniferpierce/Code/closet app/closetchart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jenniferpierce/Code/closet app/closetchart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jenniferpierce/Code/closet app/closetchart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jenniferpierce/Code/closet app/closetchart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jenniferpierce/Code/closet app/closetchart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jenniferpierce/Code/closet app/closetchart/src/pages/capsule/stats/CapsuleStats.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport FavoriteGarmentChart from './charts/FavoriteGarmentChart';\nimport ShowFiveChart from './charts/ShowFiveChart';\n\nvar sortGarmentsByOutfitCount = function sortGarmentsByOutfitCount(outfits) {\n  var counts = {};\n  outfits.forEach(function (outfit) {\n    outfit.garments.forEach(function (garment) {\n      if (counts[garment] === undefined) {\n        counts[garment] = 1;\n      } else {\n        counts[garment]++;\n      }\n    });\n  });\n  var sortableGarments = [];\n\n  for (var gID in counts) {\n    sortableGarments.push({\n      id: gID,\n      count: counts[gID]\n    });\n  } // TODO:  Handle case where there is a tie for first.\n  // TODO:  Handle tracking garments that appear in zero outfits\n  // (won't be included here).\n\n\n  return sortableGarments.sort(function (a, b) {\n    return b.count - a.count;\n  });\n};\n\nexport var CapsuleStats =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CapsuleStats, _React$Component);\n\n  function CapsuleStats() {\n    _classCallCheck(this, CapsuleStats);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CapsuleStats).apply(this, arguments));\n  }\n\n  _createClass(CapsuleStats, [{\n    key: \"render\",\n    value: function render() {\n      if (this.props.outfits && this.props.outfits.length > 0) {\n        var sortedGarments = sortGarmentsByOutfitCount(this.props.outfits);\n        var favoriteGarment = sortedGarments[0];\n        var topFive = sortedGarments.slice(0, 5);\n        var bottomFive = sortedGarments.slice(-5);\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-sm-3 col-md-3 col-lg-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        }, React.createElement(FavoriteGarmentChart, {\n          favorite: favoriteGarment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col-sm-3 col-md-3 col-lg-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, React.createElement(ShowFiveChart, {\n          garmentsToShow: topFive,\n          title: \"Top Five Most Worn\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col-sm-3 col-md-3 col-lg-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, React.createElement(ShowFiveChart, {\n          garmentsToShow: bottomFive,\n          title: \"Bottom Five Least Worn\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53\n          },\n          __self: this\n        })));\n      } else if (this.props.outfits && this.props.outfits.length === 0) {\n        return \"No outfits.\";\n      } else {\n        return \"Loading...\";\n      }\n    }\n  }]);\n\n  return CapsuleStats;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    uid: state.firebase.auth.uid,\n    capsule: state.firestore.data.capsules ? state.firestore.data.capsules[ownProps.match.params.id] : null,\n    // Include only outfits belonging to this capsule\n    outfits: state.firestore.ordered.outfits ? state.firestore.ordered.outfits.filter(function (o) {\n      return o.capsuleID === ownProps.match.params.id;\n    }) : null\n  };\n};\n\nexport default compose(connect(mapStateToProps, null))(CapsuleStats);","map":{"version":3,"sources":["/Users/jenniferpierce/Code/closet app/closetchart/src/pages/capsule/stats/CapsuleStats.js"],"names":["React","PropTypes","connect","compose","FavoriteGarmentChart","ShowFiveChart","sortGarmentsByOutfitCount","outfits","counts","forEach","outfit","garments","garment","undefined","sortableGarments","gID","push","id","count","sort","a","b","CapsuleStats","props","length","sortedGarments","favoriteGarment","topFive","slice","bottomFive","Component","mapStateToProps","state","ownProps","uid","firebase","auth","capsule","firestore","data","capsules","match","params","ordered","filter","o","capsuleID"],"mappings":"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","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\n\nimport FavoriteGarmentChart from './charts/FavoriteGarmentChart'\nimport ShowFiveChart from './charts/ShowFiveChart'\n\n\nconst sortGarmentsByOutfitCount = outfits => {\n  let counts = {}\n  outfits.forEach(outfit => {\n    outfit.garments.forEach(garment => {\n      if (counts[garment] === undefined) {\n        counts[garment] = 1\n      } else {\n        counts[garment]++\n      }\n    })\n  })\n\n  let sortableGarments = []\n  for (const gID in counts) {\n    sortableGarments.push({id: gID, count: counts[gID]})\n  }\n\n  // TODO:  Handle case where there is a tie for first.\n  // TODO:  Handle tracking garments that appear in zero outfits\n  // (won't be included here).\n\n  return sortableGarments.sort((a, b) => b.count - a.count)\n}\n\nexport class CapsuleStats extends React.Component {\n  render () {\n    if (this.props.outfits && this.props.outfits.length > 0) {\n      const sortedGarments = sortGarmentsByOutfitCount(this.props.outfits)\n      const favoriteGarment = sortedGarments[0]\n      const topFive = sortedGarments.slice(0, 5)\n      const bottomFive = sortedGarments.slice(-5)\n      return (\n        <div>\n          <div className='col-sm-3 col-md-3 col-lg-3'>\n            <FavoriteGarmentChart\n              favorite={favoriteGarment} />\n          </div>\n          <div className='col-sm-3 col-md-3 col-lg-3'>\n            <ShowFiveChart\n              garmentsToShow={topFive}\n              title='Top Five Most Worn' />\n          </div>\n          <div className='col-sm-3 col-md-3 col-lg-3'>\n            <ShowFiveChart\n              garmentsToShow={bottomFive}\n              title='Bottom Five Least Worn' />\n          </div>\n        </div>\n      )\n    } else if (this.props.outfits && this.props.outfits.length === 0) {\n      return \"No outfits.\"\n    } else {\n      return \"Loading...\"\n    }\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  uid: state.firebase.auth.uid,\n  capsule: state.firestore.data.capsules ?\n    state.firestore.data.capsules[ownProps.match.params.id] :\n    null,\n  // Include only outfits belonging to this capsule\n  outfits: state.firestore.ordered.outfits ?\n    state.firestore.ordered.outfits.filter(o => (\n      o.capsuleID === ownProps.match.params.id\n    )) :\n    null\n})\n\nexport default compose(\n  connect(mapStateToProps, null),\n)(CapsuleStats)\n"]},"metadata":{},"sourceType":"module"}