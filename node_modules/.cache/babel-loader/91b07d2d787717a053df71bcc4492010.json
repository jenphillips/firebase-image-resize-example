{"ast":null,"code":"import _classCallCheck from \"/Users/jenniferpierce/Code/example2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jenniferpierce/Code/example2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jenniferpierce/Code/example2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jenniferpierce/Code/example2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jenniferpierce/Code/example2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/jenniferpierce/Code/example2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/jenniferpierce/Code/example2/src/pages/closet/EditGarmentForm.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { firestoreConnect } from 'react-redux-firebase';\nimport FormButton from 'components/forms/FormButton';\nimport EditCategoryForm from './EditCategoryForm';\nimport styles from './editgarmentform.module.css';\nimport { deleteImage, deleteGarment, deleteGarmentFromAllCapsules, deleteOutfitsWithGarment } from 'shared/deleteMethods';\nexport var EditGarmentForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EditGarmentForm, _React$Component);\n\n  function EditGarmentForm() {\n    var _this;\n\n    _classCallCheck(this, EditGarmentForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditGarmentForm).call(this));\n    _this.handleDelete = _this.handleDelete.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(EditGarmentForm, [{\n    key: \"handleDelete\",\n    value: function handleDelete() {\n      var _this2 = this;\n\n      var capsulesWithGarment = this.props.capsules.filter(function (capsule) {\n        return capsule.garments.includes(_this2.props.garment.id);\n      });\n      deleteOutfitsWithGarment(this.props.firestore, this.props.garment.id, this.props.outfits).then(function () {\n        return deleteGarmentFromAllCapsules(_this2.props.firestore, _this2.props.garment.id, capsulesWithGarment);\n      }).then(function () {\n        return deleteImage(_this2.props.firebase, _this2.props.image);\n      }).then(function () {\n        return deleteGarment(_this2.props.firestore, _this2.props.garment.id);\n      }).then(function () {\n        console.log('delete complete');\n      }).catch(function (error) {\n        console.error(\"An error occurred: \", error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // TODO:  Add delete confirmation w/outfits link\n      return React.createElement(\"div\", {\n        className: styles.form,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pull-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(EditCategoryForm, {\n        garment: this.props.garment,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"pull-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(FormButton, {\n        onClick: this.handleDelete,\n        icon: \"remove\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return EditGarmentForm;\n}(React.Component);\nEditGarmentForm.propTypes = {\n  garment: PropTypes.object,\n  image: PropTypes.object\n};\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    capsules: state.firestore.ordered.capsules,\n    outfits: state.firestore.ordered.outfits\n  };\n};\n\nexport default compose(connect(mapStateToProps), firestoreConnect())(EditGarmentForm);","map":{"version":3,"sources":["/Users/jenniferpierce/Code/example2/src/pages/closet/EditGarmentForm.js"],"names":["React","PropTypes","connect","compose","firestoreConnect","FormButton","EditCategoryForm","styles","deleteImage","deleteGarment","deleteGarmentFromAllCapsules","deleteOutfitsWithGarment","EditGarmentForm","handleDelete","bind","capsulesWithGarment","props","capsules","filter","capsule","garments","includes","garment","id","firestore","outfits","then","firebase","image","console","log","catch","error","form","Component","propTypes","object","mapStateToProps","state","ownProps","ordered"],"mappings":"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","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\n\nimport FormButton from 'components/forms/FormButton'\nimport EditCategoryForm from './EditCategoryForm'\nimport styles from './editgarmentform.module.css'\n\nimport {\n  deleteImage,\n  deleteGarment,\n  deleteGarmentFromAllCapsules,\n  deleteOutfitsWithGarment } from 'shared/deleteMethods'\n\nexport class EditGarmentForm extends React.Component {\n  static propTypes = {\n    garment: PropTypes.object,\n    image: PropTypes.object\n  }\n\n  constructor () {\n    super()\n\n    this.handleDelete = this.handleDelete.bind(this)\n  }\n\n  handleDelete () {\n    const capsulesWithGarment = this.props.capsules.filter(capsule =>\n      capsule.garments.includes(this.props.garment.id))\n\n    deleteOutfitsWithGarment(\n      this.props.firestore,\n      this.props.garment.id,\n      this.props.outfits)\n      .then(() => {\n        return deleteGarmentFromAllCapsules(\n          this.props.firestore,\n          this.props.garment.id,\n          capsulesWithGarment\n        )\n      })\n      .then(() => {\n        return deleteImage(\n          this.props.firebase,\n          this.props.image\n        )\n      })\n      .then(() => {\n        return deleteGarment(\n          this.props.firestore,\n          this.props.garment.id\n        )\n      })\n      .then(() => {\n        console.log('delete complete')\n      })\n      .catch(error => {\n        console.error(\"An error occurred: \", error);\n      })\n  }\n\n  render() {\n    // TODO:  Add delete confirmation w/outfits link\n    return (\n      <div className={styles.form}>\n        <div className='pull-left'>\n          <EditCategoryForm\n            garment={this.props.garment} />\n        </div>\n        <div className='pull-right'>\n          <FormButton\n            onClick={this.handleDelete}\n            icon='remove' />\n        </div>\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  capsules: state.firestore.ordered.capsules,\n  outfits: state.firestore.ordered.outfits\n})\n\nexport default compose(\n  connect(mapStateToProps),\n  firestoreConnect()\n)(EditGarmentForm)\n"]},"metadata":{},"sourceType":"module"}