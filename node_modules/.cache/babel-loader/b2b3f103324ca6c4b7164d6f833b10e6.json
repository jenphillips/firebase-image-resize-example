{"ast":null,"code":"import _classCallCheck from \"/Users/jenniferpierce/Code/example2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jenniferpierce/Code/example2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jenniferpierce/Code/example2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jenniferpierce/Code/example2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jenniferpierce/Code/example2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/jenniferpierce/Code/example2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/jenniferpierce/Code/example2/src/pages/capsule/outfits/CapsuleOutfits.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { firestoreConnect } from 'react-redux-firebase';\nimport queryString from 'query-string';\nimport OutfitThumbnail from './OutfitThumbnail';\nimport styles from '../capsule.module.css';\nexport var CapsuleOutfits =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CapsuleOutfits, _React$Component);\n\n  function CapsuleOutfits() {\n    var _this;\n\n    _classCallCheck(this, CapsuleOutfits);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CapsuleOutfits).call(this));\n    _this.deleteOutfit = _this.deleteOutfit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(CapsuleOutfits, [{\n    key: \"deleteOutfit\",\n    value: function deleteOutfit(id) {\n      return this.props.firestore.delete({\n        collection: 'outfits',\n        doc: id\n      }).then(function () {\n        console.log(\"Outfit deleted.\");\n      }).catch(function (error) {\n        console.error(\"Error deleting outfit: \", error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.outfits && this.props.outfits.length > 0) {\n        var outfits = [];\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = this.props.outfits[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var outfit = _step.value;\n\n            // Outfit is null in the brief period between delete request\n            // & response.\n            if (outfit !== null) {\n              var query = queryString.parse(this.props.location.search);\n\n              if (query.garment !== undefined) {\n                // Only show outfits including the specified garment\n                if (outfit.garments.includes(query.garment)) {\n                  outfits.push(React.createElement(OutfitThumbnail, {\n                    key: outfit.id,\n                    outfitID: outfit.id,\n                    garmentIDs: outfit.garments,\n                    handleDelete: this.deleteOutfit,\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 44\n                    },\n                    __self: this\n                  }));\n                }\n              } else {\n                // Show all outfits\n                outfits.push(React.createElement(OutfitThumbnail, {\n                  key: outfit.id,\n                  outfitID: outfit.id,\n                  garmentIDs: outfit.garments,\n                  handleDelete: this.deleteOutfit,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 54\n                  },\n                  __self: this\n                }));\n              }\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, outfits);\n      } else if (this.props.outfits && this.props.outfits.length === 0) {\n        return \"No outfits.\";\n      } else {\n        return \"Loading...\";\n      }\n    }\n  }]);\n\n  return CapsuleOutfits;\n}(React.Component);\nCapsuleOutfits.propTypes = {};\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    uid: state.firebase.auth.uid,\n    outfits: state.firestore.ordered.outfits ? state.firestore.ordered.outfits.filter(function (o) {\n      return o.capsuleID === ownProps.match.params.id;\n    }) : null\n  };\n};\n\nexport default compose(connect(mapStateToProps, null), firestoreConnect())(CapsuleOutfits);","map":{"version":3,"sources":["/Users/jenniferpierce/Code/example2/src/pages/capsule/outfits/CapsuleOutfits.js"],"names":["React","PropTypes","connect","compose","firestoreConnect","queryString","OutfitThumbnail","styles","CapsuleOutfits","deleteOutfit","bind","id","props","firestore","delete","collection","doc","then","console","log","catch","error","outfits","length","outfit","query","parse","location","search","garment","undefined","garments","includes","push","Component","propTypes","mapStateToProps","state","ownProps","uid","firebase","auth","ordered","filter","o","capsuleID","match","params"],"mappings":"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","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\nimport queryString from 'query-string'\n\nimport OutfitThumbnail from './OutfitThumbnail'\n\nimport styles from '../capsule.module.css'\n\nexport class CapsuleOutfits extends React.Component {\n  static propTypes = {}\n\n  constructor () {\n    super()\n    this.deleteOutfit = this.deleteOutfit.bind(this)\n  }\n\n  deleteOutfit (id) {\n    return this.props.firestore.delete({\n      collection: 'outfits',\n      doc: id\n    }).then(function() {\n        console.log(\"Outfit deleted.\");\n      })\n      .catch(function(error) {\n        console.error(\"Error deleting outfit: \", error);\n      });\n  }\n\n  render () {\n    if (this.props.outfits && this.props.outfits.length > 0) {\n      let outfits = []\n      for (const outfit of this.props.outfits) {\n        // Outfit is null in the brief period between delete request\n        // & response.\n        if (outfit !== null) {\n          const query = queryString.parse(this.props.location.search)\n          if (query.garment !== undefined) {\n            // Only show outfits including the specified garment\n            if (outfit.garments.includes(query.garment)) {\n              outfits.push(\n                <OutfitThumbnail\n                  key={outfit.id}\n                  outfitID={outfit.id}\n                  garmentIDs={outfit.garments}\n                  handleDelete={this.deleteOutfit} />\n              )\n            }\n          } else {\n            // Show all outfits\n            outfits.push(\n              <OutfitThumbnail\n                key={outfit.id}\n                outfitID={outfit.id}\n                garmentIDs={outfit.garments}\n                handleDelete={this.deleteOutfit} />\n            )\n          }\n        }\n      }\n\n      return (\n        <div>\n          { outfits }\n        </div>\n      )\n    } else if (this.props.outfits && this.props.outfits.length === 0) {\n      return \"No outfits.\"\n    } else {\n      return \"Loading...\"\n    }\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  uid: state.firebase.auth.uid,\n  outfits: state.firestore.ordered.outfits ?\n    state.firestore.ordered.outfits.filter(o =>\n      o.capsuleID === ownProps.match.params.id\n    ) :\n    null\n})\n\nexport default compose(\n  connect(mapStateToProps, null),\n  firestoreConnect()\n)(CapsuleOutfits)\n"]},"metadata":{},"sourceType":"module"}