{"ast":null,"code":"import _classCallCheck from \"/Users/jenniferpierce/Code/closet app/closetchart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jenniferpierce/Code/closet app/closetchart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jenniferpierce/Code/closet app/closetchart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jenniferpierce/Code/closet app/closetchart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jenniferpierce/Code/closet app/closetchart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/jenniferpierce/Code/closet app/closetchart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/jenniferpierce/Code/closet app/closetchart/src/pages/capsules/CapsuleThumbnail.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { firestoreConnect } from 'react-redux-firebase';\nimport { Link } from 'react-router-dom';\nimport { Button } from 'react-bootstrap';\nimport AddCapsuleForm from './forms/AddCapsuleForm';\nimport DeleteConfirmation from 'components/forms/DeleteConfirmation';\n\nvar CapsuleThumbnail =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CapsuleThumbnail, _Component);\n\n  function CapsuleThumbnail() {\n    var _this;\n\n    _classCallCheck(this, CapsuleThumbnail);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CapsuleThumbnail).call(this));\n    _this.deleteCapsule = _this.deleteCapsule.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      confirmDeleteActive: false\n    };\n    return _this;\n  }\n\n  _createClass(CapsuleThumbnail, [{\n    key: \"deleteCapsule\",\n    value: function deleteCapsule() {\n      var _this2 = this;\n\n      this.props.firestore.delete({\n        collection: 'capsules',\n        doc: this.props.capsule.id\n      });\n      this.props.outfits.forEach(function (outfit) {\n        _this2.props.firestore.delete({\n          collection: 'outfits',\n          doc: outfit.id\n        });\n      });\n      this.setState({\n        confirmDeleteActive: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var outfitCount;\n\n      if (this.props.outfits !== null) {\n        outfitCount = this.props.outfits.length;\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/capsules/\".concat(this.props.capsule.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, this.props.capsule.name), React.createElement(Button, {\n        onClick: function onClick() {\n          return _this3.setState({\n            confirmDeleteActive: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"x\"), React.createElement(DeleteConfirmation, {\n        active: this.state.confirmDeleteActive,\n        message: \"Are you sure you want to delete capsule \".concat(this.props.capsule.name, \" with \").concat(outfitCount, \" outfits?\"),\n        onSubmit: this.deleteCapsule,\n        onCancel: function onCancel() {\n          return _this3.setState({\n            confirmDeleteActive: false\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CapsuleThumbnail;\n}(Component);\n\nCapsuleThumbnail.propTypes = {\n  capsule: PropTypes.object\n};\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    uid: state.firebase.auth.uid,\n    outfits: state.firestore.ordered.outfits ? state.firestore.ordered.outfits.filter(function (o) {\n      return o.capsuleID === ownProps.capsule.id;\n    }) : null\n  };\n};\n\nexport default compose(connect(mapStateToProps, null), firestoreConnect())(CapsuleThumbnail);","map":{"version":3,"sources":["/Users/jenniferpierce/Code/closet app/closetchart/src/pages/capsules/CapsuleThumbnail.js"],"names":["React","Component","PropTypes","connect","compose","firestoreConnect","Link","Button","AddCapsuleForm","DeleteConfirmation","CapsuleThumbnail","deleteCapsule","bind","state","confirmDeleteActive","props","firestore","delete","collection","doc","capsule","id","outfits","forEach","outfit","setState","outfitCount","length","name","propTypes","object","mapStateToProps","ownProps","uid","firebase","auth","ordered","filter","o","capsuleID"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,SAASC,gBAAT,QAAiC,sBAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,MAAT,QAAuB,iBAAvB;AAEA,OAAOC,cAAP,MAA2B,wBAA3B;AACA,OAAOC,kBAAP,MAA+B,qCAA/B;;IAEMC,gB;;;;;AAKJ,8BAAc;AAAA;;AAAA;;AACZ;AACA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,uDAArB;AAEA,UAAKC,KAAL,GAAa;AACXC,MAAAA,mBAAmB,EAAE;AADV,KAAb;AAJY;AAOb;;;;oCAEgB;AAAA;;AACf,WAAKC,KAAL,CAAWC,SAAX,CAAqBC,MAArB,CAA4B;AAC1BC,QAAAA,UAAU,EAAE,UADc;AAE1BC,QAAAA,GAAG,EAAE,KAAKJ,KAAL,CAAWK,OAAX,CAAmBC;AAFE,OAA5B;AAKA,WAAKN,KAAL,CAAWO,OAAX,CAAmBC,OAAnB,CAA2B,UAAAC,MAAM,EAAI;AACnC,QAAA,MAAI,CAACT,KAAL,CAAWC,SAAX,CAAqBC,MAArB,CAA4B;AAC1BC,UAAAA,UAAU,EAAE,SADc;AAE1BC,UAAAA,GAAG,EAAEK,MAAM,CAACH;AAFc,SAA5B;AAID,OALD;AAOA,WAAKI,QAAL,CAAc;AACZX,QAAAA,mBAAmB,EAAE;AADT,OAAd;AAGD;;;6BAEQ;AAAA;;AACP,UAAIY,WAAJ;;AACA,UAAI,KAAKX,KAAL,CAAWO,OAAX,KAAuB,IAA3B,EAAgC;AAC9BI,QAAAA,WAAW,GAAG,KAAKX,KAAL,CAAWO,OAAX,CAAmBK,MAAjC;AACD;;AAED,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AACE,QAAA,EAAE,sBAAe,KAAKZ,KAAL,CAAWK,OAAX,CAAmBC,EAAlC,CADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI,KAAKN,KAAL,CAAWK,OAAX,CAAmBQ,IAFvB,CADF,EAKE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACH,QAAL,CAAc;AAAEX,YAAAA,mBAAmB,EAAE;AAAvB,WAAd,CAAN;AAAA,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aALF,EAOE,oBAAC,kBAAD;AACE,QAAA,MAAM,EAAE,KAAKD,KAAL,CAAWC,mBADrB;AAEE,QAAA,OAAO,oDAA6C,KAAKC,KAAL,CAAWK,OAAX,CAAmBQ,IAAhE,mBAA6EF,WAA7E,cAFT;AAGE,QAAA,QAAQ,EAAE,KAAKf,aAHjB;AAIE,QAAA,QAAQ,EAAE;AAAA,iBAAM,MAAI,CAACc,QAAL,CAAc;AAACX,YAAAA,mBAAmB,EAAE;AAAtB,WAAd,CAAN;AAAA,SAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,CADF;AAeD;;;;EArD4Bb,S;;AAAzBS,gB,CACGmB,S,GAAY;AACjBT,EAAAA,OAAO,EAAElB,SAAS,CAAC4B;AADF,C;;AAuDrB,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAClB,KAAD,EAAQmB,QAAR;AAAA,SAAsB;AAC5CC,IAAAA,GAAG,EAAEpB,KAAK,CAACqB,QAAN,CAAeC,IAAf,CAAoBF,GADmB;AAE5CX,IAAAA,OAAO,EAAET,KAAK,CAACG,SAAN,CAAgBoB,OAAhB,CAAwBd,OAAxB,GACPT,KAAK,CAACG,SAAN,CAAgBoB,OAAhB,CAAwBd,OAAxB,CAAgCe,MAAhC,CAAuC,UAAAC,CAAC;AAAA,aACtCA,CAAC,CAACC,SAAF,KAAgBP,QAAQ,CAACZ,OAAT,CAAiBC,EADK;AAAA,KAAxC,CADO,GAIP;AAN0C,GAAtB;AAAA,CAAxB;;AASA,eAAejB,OAAO,CACpBD,OAAO,CAAC4B,eAAD,EAAkB,IAAlB,CADa,EAEpB1B,gBAAgB,EAFI,CAAP,CAGbK,gBAHa,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { compose } from 'redux'\nimport { firestoreConnect } from 'react-redux-firebase'\nimport { Link } from 'react-router-dom'\nimport { Button } from 'react-bootstrap'\n\nimport AddCapsuleForm from './forms/AddCapsuleForm'\nimport DeleteConfirmation from 'components/forms/DeleteConfirmation'\n\nclass CapsuleThumbnail extends Component {\n  static propTypes = {\n    capsule: PropTypes.object\n  }\n\n  constructor() {\n    super()\n    this.deleteCapsule = this.deleteCapsule.bind(this)\n\n    this.state = {\n      confirmDeleteActive: false\n    }\n  }\n\n  deleteCapsule () {\n    this.props.firestore.delete({\n      collection: 'capsules',\n      doc: this.props.capsule.id\n    })\n\n    this.props.outfits.forEach(outfit => {\n      this.props.firestore.delete({\n        collection: 'outfits',\n        doc: outfit.id\n      })\n    })\n\n    this.setState({\n      confirmDeleteActive: false,\n    })\n  }\n\n  render() {\n    let outfitCount\n    if (this.props.outfits !== null){\n      outfitCount = this.props.outfits.length\n    }\n\n    return (\n      <div>\n        <Link\n          to={`/capsules/${this.props.capsule.id}`}>\n          { this.props.capsule.name }\n        </Link>\n        <Button onClick={() => this.setState({ confirmDeleteActive: true })}>x</Button>\n\n        <DeleteConfirmation\n          active={this.state.confirmDeleteActive}\n          message={`Are you sure you want to delete capsule ${this.props.capsule.name} with ${outfitCount} outfits?`}\n          onSubmit={this.deleteCapsule}\n          onCancel={() => this.setState({confirmDeleteActive: false})} />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  uid: state.firebase.auth.uid,\n  outfits: state.firestore.ordered.outfits ?\n    state.firestore.ordered.outfits.filter(o =>\n      o.capsuleID === ownProps.capsule.id\n    ) :\n    null\n})\n\nexport default compose(\n  connect(mapStateToProps, null),\n  firestoreConnect()\n)(CapsuleThumbnail)\n"]},"metadata":{},"sourceType":"module"}